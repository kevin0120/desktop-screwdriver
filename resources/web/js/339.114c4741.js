"use strict";(self["webpackChunkleetx_web"]=self["webpackChunkleetx_web"]||[]).push([[339],{59317:function(e,t,a){function s(e){let t;if(e instanceof Array){t=[];for(let a=0;a<e.length;a++)t[a]=s(e[a])}else if(e instanceof Object){t={};for(let a of Object.keys(e))t[a]=s(e[a])}else t=e;return t}function o(e,t,a=!1){let s=!0;if(e instanceof Array&&t instanceof Array&&t.length==e.length){for(let i=0;i<e.length;i++)if(s=s&&o(e[i],t[i],a),!s)break}else if(!(e instanceof Object&&t instanceof Object)||e instanceof Array||t instanceof Array)e instanceof Object||t instanceof Object?s=!1:(s=!0,a&&(s=e===t));else for(let i in e){if(!(i in t)){s=!1;break}if(s=s&&o(e[i],t[i],a),!s)break}return s}function i(e,t,a=!1){return a?JSON.stringify(e)===JSON.stringify(t):o(e,t)}a.d(t,{IK:function(){return i},p$:function(){return s}})},67339:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var s=a(66252),o=a(3577),i=a(49963);const l={class:"op-box"},r={class:"op-prtcl-line"},n={class:"op-prtcl"},p={class:"op-input"},u={class:"ip-addresss-line"},c={class:"ip-addresss"},d={class:"port-line"},h={class:"port"},m={class:"server-prtcl-line"},v={class:"op-prtcl"},f={class:"op-input"},D={class:"server-addresss-line"},x={class:"ip-addresss"};function _(e,t,a,_,b,g){const w=(0,s.up)("LeetxSwitch"),V=(0,s.up)("InputText"),$=(0,s.up)("InputVal"),O=(0,s.up)("LeetxButton");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",r,[(0,s._)("span",n,(0,o.zw)(e.$t("setop.opprotocol")),1),(0,s._)("div",p,[(0,s.Wm)(w,{module:b.module,height:2,value:b.oldOpData.use_op,activeVal:!0,staticVal:!1,modelValue:b.opData.use_op.text,"onUpdate:modelValue":t[0]||(t[0]=e=>b.opData.use_op.text=e)},null,8,["module","value","modelValue"])])]),(0,s._)("div",u,[(0,s._)("span",c,(0,o.zw)(e.$t("setop.ipaddress")),1),(0,s.Wm)(V,{maxLength:20,module:b.module,class:"ip-input",text:b.oldOpData.ip,modelValue:b.opData.ip,"onUpdate:modelValue":t[1]||(t[1]=e=>b.opData.ip=e)},null,8,["module","text","modelValue"])]),(0,s._)("div",d,[(0,s._)("span",h,(0,o.zw)(e.$t("setop.portnumber")),1),(0,s.Wm)($,{imprprChrctr:b.limitNumBtn,module:b.module,class:"string-input",sensorValue:b.opData.port.text,"onUpdate:sensorValue":t[2]||(t[2]=e=>b.opData.port.text=e),minNum:1,maxNum:65535},null,8,["imprprChrctr","module","sensorValue"])]),(0,s.wy)((0,s._)("div",null,[(0,s._)("div",m,[(0,s._)("span",v,(0,o.zw)(e.$t("setop.resultUpload")),1),(0,s._)("div",f,[(0,s.Wm)(w,{module:b.module,height:2,value:b.oldOpData.server_enable,activeVal:!0,staticVal:!1,modelValue:b.opData.server_enable.text,"onUpdate:modelValue":t[3]||(t[3]=e=>b.opData.server_enable.text=e)},null,8,["module","value","modelValue"])])]),(0,s._)("div",D,[(0,s._)("span",x,(0,o.zw)(e.$t("setop.server")),1),(0,s.Wm)(V,{maxLength:20,module:b.module,class:"ip-input",text:b.oldOpData.server_ip,modelValue:b.opData.server_ip,"onUpdate:modelValue":t[4]||(t[4]=e=>b.opData.server_ip=e)},null,8,["module","text","modelValue"])])],512),[[i.F8,"lx"==this.$store.state.f_status.user]]),(0,s.Wm)(O,{enablerun:!1,module:b.module,class:"confirm-box",textColor:"#fff",bgcColor:"#00c155",width:"60.625vw",height:"3.75rem",fontSize:"2.25rem",fontFamily:"--SHSC-B",text:e.$t("confirm.confirm"),onClick:g.submitOpData},null,8,["module","text","onClick"])])}var b=a(265),g=a(30703),w=a(70032),V=a(83067),$=a(26971),O=a(57414),S=a(59317),k=a(84965),C={components:{InputText:g.Z,LeetxButton:b.Z,LeetxSwitch:V.Z,InputVal:w.Z},data(){return{module:"DEV_BUS",oldOpData:{ip:"127.0.0.1",port:8877,use_op:!0,server_ip:"127.0.0.1",server_enable:!1},opData:{ip:{text:"127.0.0.1",valid:!0},port:{text:8877,valid:!0},use_op:{text:!1,valid:!0},server_ip:{text:"127.0.0.1",valid:!0},server_enable:{text:!1,valid:!0}},isFirstChange:!0,isAllowLeave:!0,limitNumBtn:["-","."]}},methods:{submitOpData(){this.isAllowLeave=!0;let e=this.getToServerData();(0,$.DK)(e).then((e=>{if(0==e.status)k.c.success([this.$t("setop.saveSuc")]);else switch(e.status){case 9164:k.c.warning([this.$t("setop.networkUnavailable")]);break;case 9161:k.c.warning([this.$t("setop.portOccupied")]);break;case 9163:k.c.warning([this.$t("setop.opRestartFail")]);break;case 9160:k.c.warning([this.$t("setop.failChangeIpAddress")]);break;case 9162:k.c.warning([this.$t("setop.iPAddressInvalid")]);break;default:k.c.warning([this.$t("setop.formatError")])}})).catch((()=>{k.c.warning([this.$t("setop.saveErr")])}))},initData(){(0,$.xD)().then((e=>{0==e.status&&this.handleServerData(e.data)})).catch((()=>{this.handleServerData(this.oldOpData)}))},getToServerData(){let e={};for(let t in this.opData)e[t]=this.opData[t].text;return e},handleServerData(e){this.opData.ip.text=e.ip,this.opData.port.text=e.port,this.opData.use_op.text=e.use_op,this.opData.server_ip.text=e.server_ip,this.opData.server_enable.text=e.server_enable,this.oldOpData=(0,S.p$)(this.getToServerData()),setTimeout((()=>{this.isFirstChange=!1}),100)}},created(){this.initData()},beforeRouteLeave(e,t,a){if(this.isAllowLeave||this.$store.state.g_status.busy)return void a();let s=this.$t("setcontrol.saveSet"),o=this.$t("setcontrol.yes"),i=this.$t("setcontrol.no"),l=this.$t("setcontrol.isSaveSet");(0,O.Z)({title:s,confirmText:o,cancelText:i,msg:l}).then((()=>{this.submitOpData(),setTimeout((()=>{a()}),100)})).catch((()=>{a()}))},watch:{opData:{deep:!0,handler:function(){this.isFirstChange||(this.isAllowLeave=(0,S.IK)(this.oldOpData,this.getToServerData(),!0))}}}},y=a(83744);const A=(0,y.Z)(C,[["render",_],["__scopeId","data-v-a1358632"]]);var L=A}}]);
//# sourceMappingURL=339.114c4741.js.map