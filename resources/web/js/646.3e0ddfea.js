"use strict";(self["webpackChunkleetx_web"]=self["webpackChunkleetx_web"]||[]).push([[646],{59317:function(e,t,a){function s(e){let t;if(e instanceof Array){t=[];for(let a=0;a<e.length;a++)t[a]=s(e[a])}else if(e instanceof Object){t={};for(let a of Object.keys(e))t[a]=s(e[a])}else t=e;return t}function o(e,t,a=!1){let s=!0;if(e instanceof Array&&t instanceof Array&&t.length==e.length){for(let l=0;l<e.length;l++)if(s=s&&o(e[l],t[l],a),!s)break}else if(!(e instanceof Object&&t instanceof Object)||e instanceof Array||t instanceof Array)e instanceof Object||t instanceof Object?s=!1:(s=!0,a&&(s=e===t));else for(let l in e){if(!(l in t)){s=!1;break}if(s=s&&o(e[l],t[l],a),!s)break}return s}function l(e,t,a=!1){return a?JSON.stringify(e)===JSON.stringify(t):o(e,t)}a.d(t,{IK:function(){return l},p$:function(){return s}})},93646:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var s=a(66252),o=a(3577),l=a(49963);const i={class:"op-box"},r={class:"op-prtcl-line"},n={class:"op-prtcl"},p={class:"op-input"},u={class:"ip-addresss-line"},c={class:"ip-addresss"},d={class:"port-line"},h={class:"port"},m={class:"server-prtcl-line"},v={class:"op-prtcl"},f={class:"op-input"},D={class:"server-addresss-line"},x={class:"ip-addresss"},_={class:"gateway-line"},g={class:"ip-addresss"};function w(e,t,a,w,b,V){const $=(0,s.up)("LeetxSwitch"),y=(0,s.up)("InputText"),O=(0,s.up)("InputVal"),S=(0,s.up)("LeetxButton");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",r,[(0,s._)("span",n,(0,o.zw)(e.$t("setop.opprotocol")),1),(0,s._)("div",p,[(0,s.Wm)($,{module:b.module,height:2,value:b.oldOpData.use_op,activeVal:!0,staticVal:!1,modelValue:b.opData.use_op.text,"onUpdate:modelValue":t[0]||(t[0]=e=>b.opData.use_op.text=e)},null,8,["module","value","modelValue"])])]),(0,s._)("div",u,[(0,s._)("span",c,(0,o.zw)(e.$t("setop.ipaddress")),1),(0,s.Wm)(y,{maxLength:20,module:b.module,class:"ip-input",text:b.oldOpData.ip,modelValue:b.opData.ip,"onUpdate:modelValue":t[1]||(t[1]=e=>b.opData.ip=e)},null,8,["module","text","modelValue"])]),(0,s._)("div",d,[(0,s._)("span",h,(0,o.zw)(e.$t("setop.portnumber")),1),(0,s.Wm)(O,{imprprChrctr:b.limitNumBtn,module:b.module,class:"string-input",sensorValue:b.opData.port.text,"onUpdate:sensorValue":t[2]||(t[2]=e=>b.opData.port.text=e),minNum:1,maxNum:65535},null,8,["imprprChrctr","module","sensorValue"])]),(0,s.wy)((0,s._)("div",null,[(0,s._)("div",m,[(0,s._)("span",v,(0,o.zw)(e.$t("setop.resultUpload")),1),(0,s._)("div",f,[(0,s.Wm)($,{module:b.module,height:2,value:b.oldOpData.server_enable,activeVal:!0,staticVal:!1,modelValue:b.opData.server_enable.text,"onUpdate:modelValue":t[3]||(t[3]=e=>b.opData.server_enable.text=e)},null,8,["module","value","modelValue"])])]),(0,s._)("div",D,[(0,s._)("span",x,(0,o.zw)(e.$t("setop.server")),1),(0,s.Wm)(y,{maxLength:20,module:b.module,class:"ip-input",text:b.oldOpData.server_ip,modelValue:b.opData.server_ip,"onUpdate:modelValue":t[4]||(t[4]=e=>b.opData.server_ip=e)},null,8,["module","text","modelValue"])])],512),[[l.F8,"lx"==this.$store.state.f_status.user]]),(0,s._)("div",_,[(0,s._)("span",g,(0,o.zw)(e.$t("setop.gateway")),1),(0,s.Wm)(y,{maxLength:20,module:b.module,class:"ip-input",text:b.oldOpData.gateway,modelValue:b.opData.gateway,"onUpdate:modelValue":t[5]||(t[5]=e=>b.opData.gateway=e)},null,8,["module","text","modelValue"])]),(0,s.Wm)(S,{enablerun:!1,module:b.module,class:"confirm-box",textColor:"#fff",bgcColor:"#00c155",width:"60.625vw",height:"3.75rem",fontSize:"2.25rem",fontFamily:"--SHSC-B",text:e.$t("confirm.confirm"),onClick:V.submitOpData},null,8,["module","text","onClick"])])}var b=a(265),V=a(30703),$=a(70032),y=a(83067),O=a(26971),S=a(57414),k=a(59317),C=a(84965),L={components:{InputText:V.Z,LeetxButton:b.Z,LeetxSwitch:y.Z,InputVal:$.Z},data(){return{module:"DEV_BUS",oldOpData:{ip:"127.0.0.1",port:8877,use_op:!0,server_ip:"127.0.0.1",server_enable:!1,gateway:"0.0.0.0"},opData:{ip:{text:"127.0.0.1",valid:!0},port:{text:8877,valid:!0},use_op:{text:!1,valid:!0},server_ip:{text:"127.0.0.1",valid:!0},server_enable:{text:!1,valid:!0},gateway:{text:"0.0.0.0",valid:!0}},isFirstChange:!0,isAllowLeave:!0,limitNumBtn:["-","."]}},methods:{submitOpData(){this.isAllowLeave=!0;let e=this.getToServerData();(0,O.DK)(e).then((e=>{if(0==e.status)C.c.success([this.$t("setop.saveSuc")]);else switch(e.status){case 9164:C.c.warning([this.$t("setop.networkUnavailable")]);break;case 9161:C.c.warning([this.$t("setop.portOccupied")]);break;case 9163:C.c.warning([this.$t("setop.opRestartFail")]);break;case 9160:C.c.warning([this.$t("setop.failChangeIpAddress")]);break;case 9162:C.c.warning([this.$t("setop.iPAddressInvalid")]);break;default:C.c.warning([this.$t("setop.formatError")])}})).catch((()=>{C.c.warning([this.$t("setop.saveErr")])}))},initData(){(0,O.xD)().then((e=>{0==e.status&&this.handleServerData(e.data)})).catch((()=>{this.handleServerData(this.oldOpData)}))},getToServerData(){let e={};for(let t in this.opData)e[t]=this.opData[t].text;return e},handleServerData(e){this.opData.ip.text=e.ip,this.opData.port.text=e.port,this.opData.use_op.text=e.use_op,this.opData.server_ip.text=e.server_ip,this.opData.gateway.text=e.gateway,this.opData.server_enable.text=e.server_enable,this.oldOpData=(0,k.p$)(this.getToServerData()),setTimeout((()=>{this.isFirstChange=!1}),100)}},created(){this.initData()},beforeRouteLeave(e,t,a){if(this.isAllowLeave||this.$store.state.g_status.busy)return void a();let s=this.$t("setcontrol.saveSet"),o=this.$t("setcontrol.yes"),l=this.$t("setcontrol.no"),i=this.$t("setcontrol.isSaveSet");(0,S.Z)({title:s,confirmText:o,cancelText:l,msg:i}).then((()=>{this.submitOpData(),setTimeout((()=>{a()}),100)})).catch((()=>{a()}))},watch:{opData:{deep:!0,handler:function(){this.isFirstChange||(this.isAllowLeave=(0,k.IK)(this.oldOpData,this.getToServerData(),!0))}}}},A=a(83744);const T=(0,A.Z)(L,[["render",w],["__scopeId","data-v-b566fcf0"]]);var I=T}}]);
//# sourceMappingURL=646.3e0ddfea.js.map