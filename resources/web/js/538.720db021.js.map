{"version":3,"file":"js/538.720db021.js","mappings":"uPACSA,MAAM,a,GACFA,MAAM,gB,UAGHC,EAAAA,EAAAA,GAAI,qB,UAGRA,EAAAA,EAAAA,GAEM,aADFA,EAAAA,EAAAA,GAA0B,QAApBD,MAAM,WAAM,K,UAIlBC,EAAAA,EAAAA,GAAI,qB,UACJA,EAAAA,EAAAA,GAAa,uB,GADbC,EACAC,G,UAEJF,EAAAA,EAAAA,GAEM,aADFA,EAAAA,EAAAA,GAA0B,QAApBD,MAAM,WAAM,K,UAIlBC,EAAAA,EAAAA,GAAI,qB,UAGRA,EAAAA,EAAAA,GAEM,aADFA,EAAAA,EAAAA,GAA0B,QAApBD,MAAM,WAAM,K,UAIlBC,EAAAA,EAAAA,GAAI,qB,GAMPD,MAAM,a,iBAKGA,MAAM,a,GAEXA,MAAM,W,GAKVA,MAAM,W,UAGHC,EAAAA,EAAAA,GAAI,qB,mGAjDhBG,EAAAA,EAAAA,IAqDM,MArDNC,EAqDM,EApDFJ,EAAAA,EAAAA,GA8BM,MA9BNK,EA8BM,EA7BFL,EAAAA,EAAAA,GAIM,OAJDD,MAAM,cAAeO,QAAK,oBAAEC,EAAAA,OAAAA,EAAAA,SAAAA,K,EAC7BC,EAAAA,EAAAA,IAAoEC,EAAAA,CAAxDV,MAAM,SAASW,KAAK,SAASC,KAAK,WAC9CC,GACAZ,EAAAA,EAAAA,GAAoC,qBAA3Ba,EAAAA,GAAG,gBAAD,KAEfC,GAGAd,EAAAA,EAAAA,GAIM,OAJDD,OAAK,SAAC,cAAa,CAAUQ,EAAAA,iBAAmB,qBAAuB,iBAAiBD,QAAK,oBAAEC,EAAAA,YAAAA,EAAAA,cAAAA,K,KAKpGQ,GAGAf,EAAAA,EAAAA,GAIM,OAJDD,MAAM,cAAeO,QAAK,oBAAEC,EAAAA,QAAAA,EAAAA,UAAAA,K,EAC7BC,EAAAA,EAAAA,IAAqEC,EAAAA,CAAzDV,MAAM,SAASW,KAAK,UAAUC,KAAK,WAC/CK,GACAhB,EAAAA,EAAAA,GAAuC,qBAA9Ba,EAAAA,GAAG,mBAAD,KAEfI,GAGAjB,EAAAA,EAAAA,GAIM,OAJDD,MAAM,yBAA0BO,QAAK,oBAAEC,EAAAA,OAAAA,EAAAA,SAAAA,K,EACxCC,EAAAA,EAAAA,IAAsEC,EAAAA,CAA1DV,MAAM,SAASW,KAAK,WAAWC,KAAK,WAChDO,GACAlB,EAAAA,EAAAA,GAAuC,qBAA9Ba,EAAAA,GAAG,mBAAD,QAKnBb,EAAAA,EAAAA,GAWM,MAXNmB,EAWM,gBAVFhB,EAAAA,EAAAA,IAKMiB,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IALWC,EAAAA,OAAOC,QAAZC,K,WAAZpB,EAAAA,EAAAA,IAKM,OAL2BqB,IAAKD,EAAGxB,MAAM,eAAgBO,QAAK,GAAEC,EAAAA,WAAWgB,EAAI,I,EACjFf,EAAAA,EAAAA,IACuFC,EAAAA,CAD1EV,OAAK,kDAAkDsB,EAAAA,aAAeE,EAAI,IAClFb,KAAMW,EAAAA,aAAeE,EAAI,EAAI,WAAa,WAAYZ,KAAK,W,0BAChEX,EAAAA,EAAAA,GAAwG,QAAjGD,OAAK,4CAA4CsB,EAAAA,aAAeE,EAAI,M,QAAQhB,EAAAA,SAASgB,IAAC,IAC7FvB,EAAAA,EAAAA,GAA0D,OAA1DyB,GAA0D,QAA/BJ,EAAAA,OAAOE,EAAI,GAAG,SAAN,Y,OAEvCvB,EAAAA,EAAAA,GAGM,MAHN0B,EAGM,EAFFlB,EAAAA,EAAAA,IACyEmB,EAAAA,CAD3DC,OAAQP,EAAAA,OAASf,QAAOC,EAAAA,MAAOR,MAAM,mBAAmB8B,aAAa,IAAK,YAAU,EAC9FnB,KAAK,SAASoB,SAAS,cAAcC,SAAS,U,kCAG1D/B,EAAAA,EAAAA,GAMM,MANNgC,EAMM,EALFhC,EAAAA,EAAAA,GAIM,OAJDD,OAAK,SAAC,cAAa,CAAUQ,EAAAA,iBAAmB,qBAAuB,iBAAiBD,QAAK,oBAAEC,EAAAA,YAAAA,EAAAA,cAAAA,K,EAChGC,EAAAA,EAAAA,IAAsEC,EAAAA,CAA1DV,MAAM,SAASW,KAAK,WAAWC,KAAK,WAChDsB,GACAjC,EAAAA,EAAAA,GAAyC,qBAAhCa,EAAAA,GAAG,qBAAD,U,kFAgB3B,MAAKqB,EAAU,CACXC,WAAY,CACRC,YAAWA,EAAAA,GAEfC,OACI,MAAO,CACHT,OAAQ,UACRU,UAAW,UACXC,OAAQ,GACRC,aAAc,EAEtB,EACAC,QAAS,CAELC,SAASnB,GACL,IAAIoB,EAAOC,KAAKL,OAAOhB,EAAI,GAAGsB,KAC1BC,EAAOF,KAAKL,OAAOhB,EAAI,GAAGuB,KAC9B,OAAQH,GACJ,KAAK,EACD,OAAQG,EAAO,GAAM,KAAIA,IAAU,IAAGA,IAC1C,KAAK,EACD,OAAQA,EAAO,GAAM,KAAIA,IAAU,IAAGA,IAC1C,QACI,MAEZ,EAEAC,QAII,IAAyB,GAArBH,KAAKJ,YAAmB,OAC5B,IAAIM,EAAOF,KAAKL,OAAOK,KAAKJ,aAAaM,KACzC,GAAIA,GAAQF,KAAKI,aAAc,CAC3B,IAAIC,EAAML,KAAKM,GAAG,oBAElB,YADAC,EAAAA,EAAAA,QAAmB,CAACF,GAExB,CACA,IAAIA,EAAO,GAAEL,KAAKM,GAAG,mBAAmBN,KAAKL,OAAOK,KAAKJ,aAAaM,OAClEF,KAAKQ,OAAOC,KAAKC,WAAW,aAAeV,KAAKQ,OAAOG,OAASX,KAAKQ,OAAOG,MAAMT,MAAQA,IAC1FG,EAAML,KAAKM,GAAG,8BAElBM,EAAAA,EAAAA,GAAS,CAAEC,MAAOb,KAAKM,GAAG,cAAeQ,YAAad,KAAKM,GAAG,cAAeS,WAAYf,KAAKM,GAAG,aAAcD,QAAOW,MAAK,MACvHC,EAAAA,EAAAA,IAAS,CAAE,KAAQjB,KAAKL,OAAOK,KAAKJ,aAAaM,OAAQc,MAAME,IAE3DlB,KAAKmB,KAAKC,KAAK,UAAW,CAAElB,SACV,MAAdgB,EAAIG,OAIU,MAAdH,EAAIG,OAIU,GAAdH,EAAIG,QAIJrB,KAAKQ,OAAOC,KAAKC,WAAW,aAAeV,KAAKQ,OAAOG,OAASX,KAAKQ,OAAOG,MAAMT,MAAQA,GAC1FF,KAAKsB,QAAQC,KAAK,CAAEd,KAAMT,KAAKQ,OAAOC,KAAME,MAAO,CAAE,MAAS,KAElEX,KAAKwB,YAAY,CAAEC,OAAQ,QAC3BlB,EAAAA,EAAAA,QAAmB,CAACP,KAAKM,GAAG,qBAPxBC,EAAAA,EAAAA,QAAmB,CAACP,KAAKM,GAAG,gBAAiBN,KAAKM,GAAG,oBAJrDC,EAAAA,EAAAA,QAAmB,CAAC,eAJpBA,EAAAA,EAAAA,MAAiB,CAAC,QAeyB,IAEhDmB,OAAM,KACLnB,EAAAA,EAAAA,MAAiB,CAAC,SAClBP,KAAKwB,YAAY,CAAEC,OAAQ,OAAQ,IAEvCzB,KAAKJ,aAAe,CAAC,GAE7B,EAEA+B,SACIC,EAAAA,EAAAA,GAAc,CAAE,OAAU5B,KAAKL,SAAUqB,MAAMa,IAC3C,IAAI3B,EAAO2B,EAAO3B,MAClB4B,EAAAA,EAAAA,IAASD,EAAOE,SAASf,MAAME,IACT,MAAdA,EAAIG,OAIe,MAAdH,EAAIG,QAIU,GAAdH,EAAIG,OACLQ,EAAOE,QAAQA,QAAQC,QAAQC,EAAAA,GAC/BjC,KAAKsB,QAAQC,KAAK,CAAEd,KAAMwB,EAAAA,GAAeJ,EAAOE,QAAQA,QAAQC,MAAOrB,MAAO,CAAE,KAAQT,KAGxFF,KAAKsB,QAAQC,KAAK,CAAEd,KAAM,WAAYE,MAAO,CAAE,KAAQT,KAG3DK,EAAAA,EAAAA,MAAiB,CAACP,KAAKM,GAAG,qBAE9BN,KAAKwB,YAAY,CAAEC,OAAQ,SAbvBlB,EAAAA,EAAAA,QAAmB,CAAC,cAJpBA,EAAAA,EAAAA,QAAmB,CAAC,cAiBW,IACpCmB,OAAM,KACLnB,EAAAA,EAAAA,MAAiB,CAACP,KAAKM,GAAG,qBAC1BN,KAAKwB,YAAY,CAAEC,OAAQ,OAAQ,GACrC,GAEV,EAEAS,OAAOC,GACH,OAAO,SAAUC,EAAGC,GAChB,OAAOD,EAAED,GAASE,EAAEF,EACxB,CACJ,EAEAG,SACI,IAAyB,GAArBtC,KAAKJ,YAAqB,OAC9B,IAAIG,EAAOC,KAAKL,OAAOK,KAAKJ,aACxBG,EAAKE,QAAQgC,EAAAA,GACbjC,KAAKsB,QAAQC,KAAK,CAAEd,KAAMwB,EAAAA,GAAelC,EAAKE,MAAOU,MAAO,CAAE,KAAQZ,EAAKG,QAG3EF,KAAKsB,QAAQC,KAAK,CAAEd,KAAM,WAAYE,MAAO,CAAE,KAAQZ,EAAKG,QAEhEF,KAAKwB,YAAY,CAAEC,OAAQ,QAC/B,EAEAc,aACI,GAA0C,GAAtCvC,KAAKwC,OAAOC,MAAMC,SAASC,QAAiB,CAC5C,IAAIC,EAAS5C,KAAKM,GAAG,iBACjBuC,EAAS7C,KAAKM,GAAG,iBAErB,YADAC,EAAAA,EAAAA,QAAmB,CAACqC,EAAQC,GAEhC,CACA,IAAyB,GAArB7C,KAAKJ,YAEL,YADAW,EAAAA,EAAAA,MAAiB,CAACP,KAAKM,GAAG,yBAG9B,GAAIN,KAAKL,OAAOK,KAAKJ,aAAaM,MAAQF,KAAKwC,OAAOC,MAAMC,SAASxC,KAEjE,YADAK,EAAAA,EAAAA,QAAmB,CAACP,KAAKM,GAAG,wBAGhC,GAAIN,KAAKwC,OAAOC,MAAMC,SAASI,KAE3B,YADAvC,EAAAA,EAAAA,QAAmB,CAACP,KAAKM,GAAG,qBAAsBN,KAAKM,GAAG,2BAG9D,IAAIJ,EAAOF,KAAKL,OAAOK,KAAKJ,aAAaM,MACzC6C,EAAAA,EAAAA,IAAY7C,GAAMc,MAAMa,IACC,MAAjBA,EAAOR,QAAmC,MAAjBQ,EAAOR,QAIf,GAAjBQ,EAAOR,OACPd,EAAAA,EAAAA,QAAmB,CAACP,KAAKM,GAAG,yBAI5BC,EAAAA,EAAAA,MAAiB,SAErBP,KAAKwB,YAAY,CAAEC,OAAQ,cAVvBlB,EAAAA,EAAAA,QAAmB,CAAC,aAUgB,IACzCmB,OAAM,KACLnB,EAAAA,EAAAA,MAAiB,CAACP,KAAKM,GAAG,0BAC1BN,KAAKwB,YAAY,CAAEC,OAAQ,YAAa,GAEhD,EACAuB,WAAWC,GACPjD,KAAKJ,YAAcqD,GAASjD,KAAKJ,aAAe,EAAIqD,CACxD,EACAC,mBACI,IAAIC,GAAe,EACnB,IAAK,IAAIxE,EAAI,EAAGA,EAAIqB,KAAKL,OAAOjB,OAAQC,IACpC,GAAIqB,KAAKL,OAAOhB,GAAGuB,MAAQF,KAAKI,aAAc,CAC1C+C,EAAcxE,EACd,KACJ,CAEJqB,KAAKJ,YAAcuD,CACvB,EAEAC,UAAUC,IACNC,EAAAA,EAAAA,MACKtC,MAAMa,IACkB,MAAjBA,EAAOR,QAIU,GAAjBQ,EAAOR,QAIXrB,KAAKL,OAASkC,EAAOpC,KAAK8D,KAAKvD,KAAKkC,OAAO,SAC3ClC,KAAKkD,mBAGLG,GAAWA,KAXPrD,KAAKL,OAAS,EAWE,IAEvB+B,OAAM,KACH1B,KAAKL,OAAS,EAAE,GAE5B,EACA6B,YAAYgC,GACR,OAAQA,EAAS/B,QACb,IAAK,MACDzB,KAAKyD,iBAAkB,EACvBzD,KAAKoD,YACL,MACJ,IAAK,MACDpD,KAAKoD,YACL,MACJ,IAAK,OACDpD,KAAKyD,iBAAkB,EACvB,MACJ,IAAK,QACDzD,KAAKyD,iBAAkB,EACvB,MAEZ,GAEJC,MAAO,CACHC,UAAW,CACPC,KAAMC,MACNC,QAAS,WACL,MAAO,EACX,IAGRC,MAAO,CACHJ,UAAW,CACPK,WAAW,EACXC,MAAM,EACNC,QAAS,WACLlE,KAAKL,OAASK,KAAK2D,UACnB3D,KAAKL,OAAO4D,KAAKvD,KAAKkC,OAAO,QACjC,IAIRiC,UACInE,KAAKoD,WACT,EACAgB,YACA,EACAC,SAAU,CACNC,mBACI,OAA6C,GAAtCtE,KAAKwC,OAAOC,MAAMC,SAASC,OACtC,EAIAvC,eACI,OAAOJ,KAAKwC,OAAOC,MAAMC,SAASxC,IACtC,EACAqE,UACI,OAAIvE,KAAKhB,UAAUgB,KAAKwC,OAAOC,MAAM+B,SAASC,aAAsE,GAAvDzE,KAAKwC,OAAOC,MAAM+B,SAASC,YAAYzE,KAAKhB,OAI7G,EACA0F,eACI,OAAO1E,KAAKuE,QAAU,OAAS,MACnC,EACAI,UACI,OAAO3E,KAAKuE,QAAU,EAAI,EAC9B,EACAK,YACI,OAAI5E,KAAKN,aAAaM,KAAKwC,OAAOC,MAAM+B,SAASC,aAAyE,GAA1DzE,KAAKwC,OAAOC,MAAM+B,SAASC,YAAYzE,KAAKN,UAIhH,EACAmF,kBACI,OAAO7E,KAAK4E,UAAY,OAAS,MACrC,EACAE,aACI,OAAO9E,KAAK4E,UAAY,EAAI,EAChC,EACAG,eACI,OAA4D,GAAvD/E,KAAKwC,OAAOC,MAAM+B,SAASC,YAAYzE,KAAKhB,SAA0E,GAA1DgB,KAAKwC,OAAOC,MAAM+B,SAASC,YAAYzE,KAAKN,UAIjH,EACAsF,qBACI,OAAOhF,KAAK+E,aAAe,OAAS,MACxC,EACAE,gBACI,OAAOjF,KAAK+E,aAAe,EAAI,EACnC,I,mPCpVR,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://leetx-web/./src/components/profiles/ProfilesManagementPsets.vue","webpack://leetx-web/./src/components/profiles/ProfilesManagementPsets.vue?63fd"],"sourcesContent":["<template>\r\n    <div class=\"files-box\">\r\n        <div class=\"operate-line\">\r\n            <div class=\"operate-box\" @click=\"addPf\">\r\n                <svg-loader class=\"pfIcon\" icon=\"AddTwo\" size=\"2.5rem\"></svg-loader>\r\n                <br>\r\n                <span>{{ $t('profile.add') }}</span>\r\n            </div>\r\n            <div>\r\n                <span class=\"line\"></span>\r\n            </div>\r\n            <div class=\"activate-Pf\" :class=\"[notAllowActivate ? 'not-allow-activate' : 'operate-box']\" @click=\"activatePf\">\r\n                <!-- <svg-loader class=\"pfIcon\" icon=\"RightOne\" size=\"2.5rem\"></svg-loader> -->\r\n                <br>\r\n                <span></span>\r\n            </div>\r\n            <div>\r\n                <span class=\"line\"></span>\r\n            </div>\r\n            <div class=\"operate-box\" @click=\"editPf\">\r\n                <svg-loader class=\"pfIcon\" icon=\"EditTwo\" size=\"2.5rem\"></svg-loader>\r\n                <br>\r\n                <span>{{ $t('profile.editor') }}</span>\r\n            </div>\r\n            <div>\r\n                <span class=\"line\"></span>\r\n            </div>\r\n            <div class=\"operate-box delete-box\" @click=\"delPf\">\r\n                <svg-loader class=\"pfIcon\" icon=\"TrashOne\" size=\"2.5rem\"></svg-loader>\r\n                <br>\r\n                <span>{{ $t('profile.delete') }}</span>\r\n            </div>\r\n        </div>\r\n        \r\n\r\n        <div class=\"items-box\">\r\n            <div v-for=\"i of pfList.length\" :key=\"i\" class=\"profile-item\" @click=\"selectFile(i - 1)\">\r\n                <svg-loader :class=\"{ 'file-static-icon': true, 'file-active-icon': active_item == i - 1 }\"\r\n                    :icon=\"active_item == i - 1 ? 'ActivePf' : 'StaticPf'\" size='10.5rem'></svg-loader>\r\n                <span :class=\"{ 'pf-static-num': true, 'pf-active-num': active_item == i - 1 }\">{{ getPfNum(i) }}</span>\r\n                <span class=\"file-name\">{{ pfList[i - 1]['name'] }}</span>\r\n            </div>\r\n            <div class=\"add-box\">\r\n                <LeetxButton :module=\"module\" @click=\"addPf\" class=\"file-static-icon\" borderRadius=\"0\" :use-icon=\"true\"\r\n                    icon=\"AddTwo\" bgcColor=\"transparent\" iconSize=\"2.5rem\"></LeetxButton>\r\n            </div>\r\n        </div>\r\n        <div class=\"act-box\">\r\n            <div class=\"activate-Pf\" :class=\"[notAllowActivate ? 'not-allow-activate' : 'operate-box']\" @click=\"activatePf\">\r\n                <svg-loader class=\"pfIcon\" icon=\"RightOne\" size=\"2.5rem\"></svg-loader>\r\n                <br>\r\n                <span>{{ $t('profile.activate') }}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { pfDelApi, pfAddApi, pfCurSelApi } from '@/api/profile/profile'\r\nimport { messageApi } from '../message/message.js'\r\nimport cnfrmWin from '@/dialogs/common/confirm/cnfrm'\r\nimport addPsetDialog from '@/dialogs/program/createpro'\r\nimport LeetxButton from '@/components/controls/LeetxButton.vue'\r\nimport { profile_routes } from '@/components/profiles/profileHelper'\r\nimport {\r\n    curPfListApi,\r\n} from \"@/api/profile/profile\";\r\nexport default {\r\n    components: {\r\n        LeetxButton\r\n    },\r\n    data() {\r\n        return {\r\n            module: \"PROFILE\",\r\n            pstmodule: \"SELPSET\",\r\n            pfList: [],\r\n            active_item: -1,\r\n        }\r\n    },\r\n    methods: {\r\n        // 展示pset号\r\n        getPfNum(i) {\r\n            let file = this.pfList[i - 1].mode\r\n            let pset = this.pfList[i - 1].pset\r\n            switch (file) {\r\n                case 1:\r\n                    return (pset < 10 ? `F0${pset}` : `F${pset}`);\r\n                case 2:\r\n                    return (pset < 10 ? `E0${pset}` : `E${pset}`);\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n        // 向工艺编辑区发送信号,删除的文件pset,\r\n        delPf() {\r\n            // if (this.$store.state.f_status.user == 'guest') {\r\n            //     return messageApi.warning(['guest用户无权限操作'])\r\n            // }\r\n            if (this.active_item == -1) return\r\n            let pset = this.pfList[this.active_item].pset\r\n            if (pset == this.activatePset) {\r\n                let msg = this.$t('promsg.no_delete')\r\n                messageApi.warning([msg])\r\n                return\r\n            }\r\n            let msg = `${this.$t('promsg.is_del')}${this.pfList[this.active_item].pset}`\r\n            if (this.$route.path.startsWith(\"/profile\") && this.$route.query && this.$route.query.pset == pset) {\r\n                msg = this.$t('promsg.deleteFileEditing')\r\n            }\r\n            cnfrmWin({ title: this.$t('promsg.del'), confirmText: this.$t('promsg.yes'), cancelText: this.$t('promsg.no'), msg }).then(() => {\r\n                pfDelApi({ 'pset': this.pfList[this.active_item].pset }).then((res) => {\r\n                    //删除文件的pset号\r\n                    this.$bus.emit('delPset', { pset })\r\n                    if (res.status == 9130) {\r\n                        messageApi.error([\"删除失败\"])\r\n                        return\r\n                    }\r\n                    if (res.status == 9125) {\r\n                        messageApi.warning(['文件不存在或已经删除'])\r\n                        return\r\n                    }\r\n                    if (res.status != 0) {\r\n                        messageApi.warning([this.$t('promsg.nexit'), this.$t('promsg.has_del')])\r\n                        return\r\n                    }\r\n                    if (this.$route.path.startsWith(\"/profile\") && this.$route.query && this.$route.query.pset == pset) {\r\n                        this.$router.push({ path: this.$route.path, query: { 'pset': -1 } })\r\n                    }\r\n                    this.operateFile({ action: \"sub\" })\r\n                    messageApi.success([this.$t('promsg.del_suc')])\r\n\r\n                }).catch(() => {\r\n                    messageApi.error([\"删除失败\"])\r\n                    this.operateFile({ action: \"sub\" })\r\n                });\r\n                this.active_item = -1\r\n            })\r\n        },\r\n        // 添加文件\r\n        addPf() {\r\n            addPsetDialog({ \"pfList\": this.pfList }).then((result) => {\r\n                let pset = result.pset;\r\n                pfAddApi(result.Profile).then((res) => {\r\n                    if (res.status == 9121) {\r\n                        messageApi.warning(['Pset或文件名重复'])\r\n                        return\r\n                    }\r\n                    else if (res.status == 9123) {\r\n                        messageApi.warning(['文件写入数据库失败'])\r\n                        return\r\n                    }\r\n                    else if (res.status == 0) {\r\n                        if (result.Profile.Profile.Mode in profile_routes) {\r\n                            this.$router.push({ path: profile_routes[result.Profile.Profile.Mode], query: { 'pset': pset } })\r\n                        }\r\n                        else {\r\n                            this.$router.push({ path: '/profile', query: { 'pset': pset } })\r\n                        }\r\n                    } else {\r\n                        messageApi.error([this.$t('promsg.add_fail')])\r\n                    }\r\n                    this.operateFile({ action: \"add\" })\r\n                }).catch(() => {\r\n                    messageApi.error([this.$t('promsg.add_fail')])\r\n                    this.operateFile({ action: \"add\" })\r\n                });\r\n            })\r\n        },\r\n        // 排序\r\n        sortBy(field) {\r\n            return function (a, b) {\r\n                return a[field] - b[field];\r\n            }\r\n        },\r\n        // 编辑文件\r\n        editPf() {\r\n            if (this.active_item == -1) { return }\r\n            let file = this.pfList[this.active_item]\r\n            if (file.mode in profile_routes) {\r\n                this.$router.push({ path: profile_routes[file.mode], query: { 'pset': file.pset } })\r\n            }\r\n            else {\r\n                this.$router.push({ path: '/profile', query: { 'pset': file.pset } })\r\n            }\r\n            this.operateFile({ action: \"edit\" })\r\n        },\r\n        // 激活文件\r\n        activatePf() {\r\n            if (this.$store.state.g_status.psetsrc != 0x01) {\r\n                let msgOne = this.$t('promsg.msgOne')\r\n                let msgTwo = this.$t('promsg.msgTwo')\r\n                messageApi.warning([msgOne, msgTwo])\r\n                return\r\n            }\r\n            if (this.active_item == -1) {\r\n                messageApi.error([this.$t('promsg.nselect_file')])\r\n                return\r\n            }\r\n            if (this.pfList[this.active_item].pset == this.$store.state.g_status.pset) {\r\n                messageApi.warning([this.$t('promsg.file_locate')])\r\n                return\r\n            }\r\n            if (this.$store.state.g_status.busy) {\r\n                messageApi.warning([this.$t('promsg.run_status'), this.$t('promsg.nactivate_file')])\r\n                return\r\n            }\r\n            let pset = this.pfList[this.active_item].pset\r\n            pfCurSelApi(pset).then((result) => {\r\n                if (result.status == 9126 || result.status == 9129) {\r\n                    messageApi.warning(['下位机切换文件失败'])\r\n                    return\r\n                }\r\n                if (result.status == 0) {\r\n                    messageApi.success([this.$t('promsg.activate_suc')])\r\n                    // 激活工艺不需要跳转到编辑页面\r\n                    // this.$router.push({path:'/profile',query:{'pset':pset},parasm:{}})\r\n                } else {\r\n                    messageApi.error(\"激活失败!\")\r\n                }\r\n                this.operateFile({ action: \"activate\" })\r\n            }).catch(() => {\r\n                messageApi.error([this.$t('promsg.activate_fail')])\r\n                this.operateFile({ action: \"activate\" })\r\n            });\r\n        },\r\n        selectFile(index) {\r\n            this.active_item = index == this.active_item ? -1 : index\r\n        },\r\n        updateActiveItem() {\r\n            let activeIndex = -1\r\n            for (let i = 0; i < this.pfList.length; i++) {\r\n                if (this.pfList[i].pset == this.activatePset) {\r\n                    activeIndex = i\r\n                    break\r\n                }\r\n            }\r\n            this.active_item = activeIndex\r\n        },\r\n\r\n        getPfList(success = undefined) {\r\n            curPfListApi()\r\n                .then((result) => {\r\n                    if (result.status == 9127) {\r\n                        this.pfList = [];\r\n                        return;\r\n                    }\r\n                    if (result.status != 0) {\r\n                        this.pfList = [];\r\n                        return;\r\n                    }\r\n                    this.pfList = result.data.sort(this.sortBy(\"pset\"));\r\n                    this.updateActiveItem()\r\n                    //文件个数的标志\r\n                    // this.initPfNum();\r\n                    success && success();\r\n                })\r\n                .catch(() => {\r\n                    this.pfList = [];\r\n                });\r\n        },\r\n        operateFile(operator) {\r\n            switch (operator.action) {\r\n                case \"add\":\r\n                    this.showprofile_lst = false;\r\n                    this.getPfList();\r\n                    break;\r\n                case \"sub\":\r\n                    this.getPfList();\r\n                    break;\r\n                case \"edit\":\r\n                    this.showprofile_lst = false;\r\n                    break;\r\n                case 'close':\r\n                    this.showprofile_lst = false;\r\n                    break;\r\n            }\r\n        },\r\n    },\r\n    props: {\r\n        fileItems: {\r\n            type: Array,\r\n            default: function () {\r\n                return []\r\n            }\r\n        },\r\n    },\r\n    watch: {\r\n        fileItems: {\r\n            immediate: true,\r\n            deep: true,\r\n            handler: function () {\r\n                this.pfList = this.fileItems\r\n                this.pfList.sort(this.sortBy('pset'))\r\n            }\r\n        },\r\n\r\n    },\r\n    created() {\r\n        this.getPfList()\r\n    },\r\n    unmounted() {\r\n    },\r\n    computed: {\r\n        notAllowActivate() {\r\n            return this.$store.state.g_status.psetsrc != 0x01\r\n        },\r\n        // editingPset() {\r\n        //     return this.$store.state.f_status.editingPset\r\n        // },\r\n        activatePset() {\r\n            return this.$store.state.g_status.pset\r\n        },\r\n        enabled() {\r\n            if (this.module in this.$store.state.f_status.permissions && this.$store.state.f_status.permissions[this.module] == 4)\r\n                return true\r\n            else\r\n                return false\r\n        },\r\n        pointerEvent() {\r\n            return this.enabled ? \"auto\" : \"none\";\r\n        },\r\n        opacity() {\r\n            return this.enabled ? 1 : 0.3;\r\n        },\r\n        actEnable() {\r\n            if (this.pstmodule in this.$store.state.f_status.permissions && this.$store.state.f_status.permissions[this.pstmodule] == 4)\r\n                return true\r\n            else\r\n                return false\r\n        },\r\n        actPointerEvent() {\r\n            return this.actEnable ? \"auto\" : \"none\";\r\n        },\r\n        actOpacity() {\r\n            return this.actEnable ? 1 : 0.3;\r\n        },\r\n        prfileEnable() {\r\n            if ( this.$store.state.f_status.permissions[this.module] == 4 || this.$store.state.f_status.permissions[this.pstmodule] == 4)\r\n                return true\r\n            else\r\n                return false\r\n        },\r\n        prfilePointerEvent() {\r\n            return this.prfileEnable ? \"auto\" : \"none\";\r\n        },\r\n        prfileOpacity() {\r\n            return this.prfileEnable ? 1 : 0.3;\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.files-box {\r\n    position: relative;\r\n    width: 100vw;\r\n    background-color: var(--Cee);\r\n\r\n    /* z-index: 36 !important; */\r\n}\r\n.act-box{\r\n    position: absolute;\r\n    top: 0.5rem;\r\n    left: 34vw;\r\n    width: 6rem;\r\n}\r\n.activate-Pf {\r\n    position: absolute;\r\n    top: 0rem;\r\n    left: 0rem;\r\n    font-size: var(--font1_625);\r\n    font-weight: 500;\r\n    color: #3B3B3B;\r\n    pointer-events: v-bind(actPointerEvent) !important;\r\n    opacity: v-bind(actOpacity) !important;\r\n}\r\n.inv-text{\r\n    font-size: var(--font1_625);\r\n    font-weight: 500;\r\n    color: #3B3B3B;\r\n}\r\n.operate-line {\r\n    position: relative;\r\n    top: 0.1rem;\r\n    width: 100vw;\r\n    display: flex;\r\n    box-sizing: border-box;\r\n    /* border-bottom: 1px solid var(--CD4); */\r\n    pointer-events: v-bind(pointerEvent);\r\n    opacity: v-bind(opacity);\r\n}\r\n\r\n.operate-line div {\r\n    flex: 1;\r\n    padding: 5px;\r\n    position: relative;\r\n}\r\n\r\n.line {\r\n    display: block;\r\n    position: relative;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    height: 2.05rem;\r\n    width: 1px;\r\n    background-color: var(--CD4);\r\n}\r\n\r\n.operate-line .operate-box {\r\n    flex: 3;\r\n    font-size: var(--font1_625);\r\n    font-weight: 500;\r\n    color: #3B3B3B;\r\n}\r\n\r\n.operate-box:active,\r\n.operate-box:active .pfIcon {\r\n    color: var(--C00c155) !important;\r\n}\r\n\r\n.delete-box:active,\r\n.delete-box:active .pfIcon {\r\n    color: var(--CE61F00) !important;\r\n}\r\n\r\n.items-box {\r\n    position: absolute !important;\r\n    width: 100vw;\r\n    top: 8vh;\r\n    height: 67vh !important;\r\n    overflow: hidden;\r\n    overflow-y: scroll;\r\n}\r\n\r\n.items-box::-webkit-scrollbar {\r\n    display: none;\r\n}\r\n\r\n.profile-item {\r\n    position: relative;\r\n    float: left;\r\n    margin: 2.2rem;\r\n    list-style: none;\r\n    width: 3.891rem;\r\n    height: 4.4465rem;\r\n    cursor: pointer;\r\n    pointer-events: v-bind(prfilePointerEvent);\r\n    opacity: v-bind(prfileOpacity);\r\n}\r\n.add-box{\r\n    position: relative;\r\n    float: left;\r\n    margin: 2.2rem;\r\n    list-style: none;\r\n    width: 3.891rem;\r\n    height: 4.4465rem;\r\n    cursor: pointer; \r\n}\r\n.file-static-icon {\r\n    position: absolute;\r\n    width: 4.625rem;\r\n    height: 5rem;\r\n    left: 51%;\r\n    transform: translate(-50%, -50%);\r\n    top: 50%;\r\n    font-size: var(--font1_625);\r\n}\r\n\r\n.file-active-icon {\r\n    position: absolute;\r\n    width: 4.875rem;\r\n    height: 4.4375rem;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    top: 50%;\r\n    font-size: 2.4rem;\r\n}\r\n\r\n.pf-static-num {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 63%;\r\n    transform: translate(-50%, -50%);\r\n    font-size: var(--font1_625);\r\n}\r\n\r\n.pf-active-num {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 64%;\r\n    transform: translate(-50%, -50%);\r\n    font-size: 2rem;\r\n    color: #00C155 !important;\r\n}\r\n\r\n.file-name {\r\n    display: inline-block;\r\n    font-family: var(--SHSC-R);\r\n    font-size: 1.5rem;\r\n    font-weight: normal;\r\n    width: 20vw;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    color: var(--C3B);\r\n    position: absolute;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    top: 100%;\r\n}\r\n\r\n.not-allow-activate {\r\n    font-size: var(--font1_625);\r\n    font-weight: 500;\r\n    color: var(--Cb0) !important;\r\n}\r\n\r\n.operate-box .not-allow-activate:active {\r\n    font-size: var(--font1_625);\r\n    font-weight: 500;\r\n    color: var(--Cb0) !important;\r\n\r\n}\r\n</style>","import { render } from \"./ProfilesManagementPsets.vue?vue&type=template&id=71e97ad1&scoped=true\"\nimport script from \"./ProfilesManagementPsets.vue?vue&type=script&lang=js\"\nexport * from \"./ProfilesManagementPsets.vue?vue&type=script&lang=js\"\n\nimport \"./ProfilesManagementPsets.vue?vue&type=style&index=0&id=71e97ad1&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Code\\\\Leetx\\\\web-screwdriver\\\\app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-71e97ad1\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_5","_hoisted_6","_createElementBlock","_hoisted_1","_hoisted_2","onClick","$options","_createVNode","_component_svg_loader","icon","size","_hoisted_3","_ctx","_hoisted_4","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment","$data","length","i","key","_hoisted_14","_hoisted_15","_component_LeetxButton","module","borderRadius","bgcColor","iconSize","_hoisted_16","_hoisted_17","__default__","components","LeetxButton","data","pstmodule","pfList","active_item","methods","getPfNum","file","this","mode","pset","delPf","activatePset","msg","$t","messageApi","$route","path","startsWith","query","cnfrmWin","title","confirmText","cancelText","then","pfDelApi","res","$bus","emit","status","$router","push","operateFile","action","catch","addPf","addPsetDialog","result","pfAddApi","Profile","Mode","profile_routes","sortBy","field","a","b","editPf","activatePf","$store","state","g_status","psetsrc","msgOne","msgTwo","busy","pfCurSelApi","selectFile","index","updateActiveItem","activeIndex","getPfList","success","curPfListApi","sort","operator","showprofile_lst","props","fileItems","type","Array","default","watch","immediate","deep","handler","created","unmounted","computed","notAllowActivate","enabled","f_status","permissions","pointerEvent","opacity","actEnable","actPointerEvent","actOpacity","prfileEnable","prfilePointerEvent","prfileOpacity","__exports__","render"],"sourceRoot":""}