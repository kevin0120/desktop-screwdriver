"use strict";(self["webpackChunkleetx_web"]=self["webpackChunkleetx_web"]||[]).push([[210],{86375:function(t,e){e.L=void 0,function(t){t["Aqua"]="#00ffff",t["BackgroundColor"]="#1c1c1e",t["Blue"]="#368BC1",t["DarkGreen"]="#03925e",t["DarkRed"]="#be0000",t["DarkGrey"]="#7e8486",t["DefaultGridBandsColor"]="#202123",t["DefaultTextColor"]="#c8c7c3",t["DodgerBlue"]="#1E90FF",t["Green"]="#228B22",t["LightGrey"]="#eeeeee",t["LightSteelBlue"]="#b0c4de",t["LimeGreen"]="#32CD32",t["Orange"]="#ff6600",t["OrangeRed"]="#FF4500",t["Purple"]="#B200FF",t["Red"]="#ff0000",t["White"]="#ffffff",t["Yellow"]="#FFFF00"}(e.L||(e.L={}))},10413:function(t,e,s){s.d(e,{Z:function(){return b}});var a=s(66252),i=s(3577);const r=t=>((0,a.dD)("data-v-457072d2"),t=t(),(0,a.Cn)(),t),o={class:"doughnut"},n={class:"fractions"},c={class:"percent"},l=r((()=>(0,a._)("div",{class:"solid-line"},null,-1))),h=r((()=>(0,a._)("div",{class:"dotted-line"},null,-1))),u=["id"];function d(t,e,s,r,d,_){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",null,[(0,a._)("span",{class:(0,i.C_)(["pset-id",1==s.active?"active-span":""])},(0,i.zw)(s.pset),3),(0,a._)("div",n,(0,i.zw)(this.status.length)+"/"+(0,i.zw)(s.total),1),(0,a._)("div",c,(0,i.zw)(_.percent),1),l,h]),(0,a._)("div",{id:s.prefix+"-"+s.pset,style:{width:"13.25rem",height:"13.25rem"}},null,8,u)])}var _=s(5284),g=s(98442),m=s(86375),p=s(20306),v={name:"pieChartTwo",data(){return{chart:void 0,color:"#EEEEEE",radiusSize:[1],pieSegment:{}}},props:{pset:{type:String,default:"001"},status:{type:Array,default:function(){return[]}},total:{type:Number,default:7},prefix:{type:String,default:"A"},active:{type:Number,default:1}},watch:{status:{handler(t,e){void 0!==e&&this.updatePieSegments()},immediate:!0}},activated(){this.initSciChart()},computed:{domId(){return this.prefix+"-"+this.pset},okCount(){return this.status.filter((t=>1===t)).length},percent(){return Math.round(this.okCount/this.total*100)+"%"}},methods:{async initSciChart(){let t=new p.SciChartJSLightTheme;if(t.sciChartBackground="transparent",!document.querySelector("#".concat(this.domId)))return;const e=await g.SciChartPieSurface.create(this.domId,{theme:t,pieType:g.EPieType.Donut,holeRadius:.8,holeRadiusSizingMode:g.ESizingMode.Relative,seriesSpacing:5});e.labelRadiusAdjustment=0,e.labelStyle={fontSize:0,color:m.L.White},e.legend.showLegend=!1,e.animate=!1;const s=(t,e,s)=>new _.PieSegment({value:t,radiusAdjustment:e,showLabel:t>2,color:s});let a=[];for(let i=0;i<this.total;i++){let t=s(1,this.radiusSize[0],"#EEEEEE");a.push(t)}for(let i=0;i<this.status.length;i++)0==this.status[i]?a[i].color="#AC0000":a[i].color="#00C155";a.push(new _.PieSegment({value:.01,radiusAdjustment:this.radiusSize[0],showLabel:!1,color:"#ffffff"})),e.pieSegments.add(...a),this.chart=e},updatePieSegments(){const t=[];for(let e=0;e<this.total;e++){const s=new _.PieSegment({value:1,radiusAdjustment:this.radiusSize[0],showLabel:!1,color:e>=this.status.length?"#EEEEEE":0==this.status[e]?"#AC0000":"#00C155"});t.push(s)}t.push(new _.PieSegment({value:.01,radiusAdjustment:this.radiusSize[0],showLabel:!1,color:"#ffffff"})),this.chart||this.initSciChart(),this.chart&&(this.chart.pieSegments.clear(),this.chart.pieSegments.add(...t),this.chart.invalidateElement())}}},f=s(83744);const C=(0,f.Z)(v,[["render",d],["__scopeId","data-v-457072d2"]]);var b=C},25210:function(t,e,s){s.r(e),s.d(e,{default:function(){return ze}});var a=s(66252),i=s(49963),r=s(3577);const o={class:"monitor-box"},n={class:"monitor-values"};function c(t,e,s,c,l,h){const u=(0,a.up)("Right"),d=(0,a.up)("Runing"),_=(0,a.up)("Ready"),g=(0,a.up)("DevcieAlarm"),m=(0,a.up)("IDLine"),p=(0,a.up)("NewSensor"),v=(0,a.up)("chartPosSensor"),f=(0,a.up)("chartRealPosSensor"),C=(0,a.up)("chartRealSpeed"),b=(0,a.up)("chartDot");return(0,a.wg)(),(0,a.iD)("div",o,[2==h.stateBgc?((0,a.wg)(),(0,a.j4)(u,{key:0,class:"alarm-box"})):(0,a.kq)("",!0),3==h.stateBgc?((0,a.wg)(),(0,a.j4)(d,{key:1,class:"alarm-box"})):(0,a.kq)("",!0),4==h.stateBgc?((0,a.wg)(),(0,a.j4)(_,{key:2,class:"alarm-box"})):(0,a.kq)("",!0),5==h.stateBgc?((0,a.wg)(),(0,a.j4)(g,{key:3,class:"alarm-box"})):(0,a.kq)("",!0),(0,a._)("div",n,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(m,{tid:this.$store.state.g_status.tid,is:l.componentName,key:l.componentKey,sn:`${this.$store.state.g_status.ret_sn??"--"}`,batchesinfo:`${this.$store.state.g_status.ret_cnt}/${this.$store.state.g_status.ret_batches}`},null,8,["tid","is","sn","batchesinfo"])),[[i.F8,3!=h.stateBgc]]),(0,a.wy)((0,a.Wm)(p,{sensorName:t.$t("monitor.target_angle"),min:this.$store.state.g_status.ret_pos_min,max:this.$store.state.g_status.ret_pos_max,sname:"angle",sensorValue:this.$store.state.g_status.ret_pos,sensorUnit:h.updateUnit("angle")},null,8,["sensorName","min","max","sensorValue","sensorUnit"]),[[i.F8,3!=h.stateBgc]]),(0,a.wy)((0,a.Wm)(p,{sensorName:t.$t("monitor.target_torque"),min:this.$store.state.g_status.ret_sensor_min,fixed:3,max:this.$store.state.g_status.ret_sensor_max,sname:"torque",sensorValue:this.$store.state.g_status.ret_sensor,sensorUnit:h.updateUnit("torque"),isShowLine:!1},null,8,["sensorName","min","max","sensorValue","sensorUnit"]),[[i.F8,3!=h.stateBgc]]),(0,a.wy)((0,a.Wm)(p,{sensorName:t.$t("monitor.angle"),sname:"angle",min:"--",max:"--",sensorValue:this.$store.state.g_status.pos,sensorUnit:h.updateUnit("angle")},null,8,["sensorName","sensorValue","sensorUnit"]),[[i.F8,3==h.stateBgc]]),(0,a.wy)((0,a.Wm)(p,{sensorName:t.$t("monitor.torque"),sname:"torque",sensorValue:this.$store.state.g_status.sensor,fixed:3,sensorUnit:h.updateUnit("torque"),min:"--",max:"--"},null,8,["sensorName","sensorValue","sensorUnit"]),[[i.F8,3==h.stateBgc]]),(0,a.wy)((0,a.Wm)(p,{sensorName:t.$t("monitor.speed"),sname:"angle_speed",isShowLine:!1,displayLimit:!1,sensorValue:this.$store.state.g_status.speed,sensorUnit:h.updateUnit("angle_speed")},null,8,["sensorName","sensorValue","sensorUnit"]),[[i.F8,3==h.stateBgc]])]),(0,a._)("div",{class:(0,r.C_)({"chart-long-box":!h.showFooter,"chart-box":h.showFooter,item1:!0})},[(0,a.Wm)(v,{onOnShowChartChange:h.onShowChartChange},null,8,["onOnShowChartChange"])],2),(0,a._)("div",{class:(0,r.C_)({"chart-long-box":!h.showFooter,"chart-box":h.showFooter,item2:!0})},[(0,a.Wm)(f,{onOnShowChartChange:h.onShowChartChange},null,8,["onOnShowChartChange"])],2),(0,a._)("div",{class:(0,r.C_)({"chart-long-box":!h.showFooter,"chart-box":h.showFooter,item3:!0})},[(0,a.Wm)(C,{onOnShowChartChange:h.onShowChartChange},null,8,["onOnShowChartChange"])],2),(0,a._)("div",{class:(0,r.C_)({"chart-long-box":!h.showFooter,"chart-box":h.showFooter,item4:!0})},[((0,a.wg)(),(0,a.j4)(b,{onOnShowChartChange:h.onShowChartChange,is:l.componentJobName,key:l.componentJobKey},null,8,["onOnShowChartChange","is"]))],2)])}var l=s(48593);const h=t=>((0,a.dD)("data-v-141d5a22"),t=t(),(0,a.Cn)(),t),u={class:"chart-main"},d=h((()=>(0,a._)("div",{id:"txy",class:"chart-box"},null,-1))),_={class:"chart-options",contenteditable:!1},g=h((()=>(0,a._)("div",{class:"x-label"},"time",-1)));function m(t,e,s,o,n,c){const l=(0,a.up)("svg-loader");return(0,a.wg)(),(0,a.iD)("div",u,[d,(0,a._)("div",{class:"operate-chart-box",contenteditable:"true",onBlur:e[7]||(e[7]=t=>n.select_item_indx=-1)},[(0,a._)("div",{class:(0,r.C_)({"select-chart":!0,"bgc-white":0==n.select_item_indx}),onClick:e[0]||(e[0]=t=>n.select_item_indx=0==n.select_item_indx?-1:0)},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:"Chart"})],2),(0,a._)("div",{class:"select-chart",onClick:e[1]||(e[1]=(...t)=>c.auto_range&&c.auto_range(...t))},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:n.isAutoFit?"ActiveAuto":"StaticAuto"},null,8,["icon"])]),n.isAutoFit?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)({"select-chart":!0,"bgc-white":3==n.select_item_indx}),onClick:e[2]||(e[2]=(...t)=>c.fit&&c.fit(...t))},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:"AutoChart"})],2)),(0,a.wy)((0,a._)("div",_,[(0,a._)("div",{class:(0,r.C_)({"active-chart":1==t.$global_var.ui_config.chart_tab}),onClick:e[3]||(e[3]=t=>c.switchChart(1))},(0,r.zw)(t.$t("curve.torqueAngleCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":2==t.$global_var.ui_config.chart_tab}),onClick:e[4]||(e[4]=t=>c.switchChart(2))},(0,r.zw)(t.$t("curve.timeAngleTorqueCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":3==t.$global_var.ui_config.chart_tab}),onClick:e[5]||(e[5]=t=>c.switchChart(3))},(0,r.zw)(t.$t("curve.speedCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":4==t.$global_var.ui_config.chart_tab}),onClick:e[6]||(e[6]=t=>c.switchChart(4))},(0,r.zw)(t.$t("curve.jobChart")),3)],512),[[i.F8,0==n.select_item_indx]])],32),g])}var p=s(7050),v=s(38373),f=s(27126),C=s(45718);const b=["null","xy","txy","ts"];class w{constructor(){this.ws=null,this.IsRunning=!1,this.sensor_max=0,this.process_cache={len:0,pdata:{times:[],pos:[],sensor_val:[],speeds:[]}},this.resetting=!1}close(){this.ws&&this.ws.close(),this.ws=null,this.seriesDataHandlers={},this.clearDataHandlers=null,this.IsRunning=!1}createWs(){v.vP.msghandler=t=>{try{this.resolvePdata(t),0==this.sensor_max&&(this.sensor_max=f.G.state.g_status.sensor_max*f.G.state.sensors.torque.gain+f.G.state.sensors.torque.offset)}catch(e){console.log(e)}},v.vP.openhandler=()=>{this.IsRunning=!0},v.vP.closehandler=()=>{this.IsRunning=!1,this.sensor_max=0},v.vP.open()}clearCache(){this.process_cache.len=0,this.process_cache.pdata.times.length=0,this.process_cache.pdata.sensor_val.length=0,this.process_cache.pdata.pos.length=0,this.process_cache.pdata.speeds.length=0}resolvePdata(t){let e=JSON.parse(t);if("DATA_NEW"==e.Result)this.clearCache(),this.clearSeriesData();else{e.sensor_val=e.sensor_val.map((t=>t*f.G.state.sensors.torque.gain+f.G.state.sensors.torque.offset)),e.pos=e.pos.map((t=>t*f.G.state.sensors.angle.gain+f.G.state.sensors.angle.offset)),e.speeds=e.speeds.map((t=>t*f.G.state.sensors.angle_speed.gain+f.G.state.sensors.angle_speed.offset));let t=this.process_cache.pdata.times.push(...e.times);this.process_cache.pdata.sensor_val.push(...e.sensor_val),this.process_cache.pdata.pos.push(...e.pos),this.process_cache.pdata.speeds.push(...e.speeds),e.pos.length>1&&e.pos.length==e.speeds.length&&this.raiseSeriesData(e),this.process_cache.len=t}e=null}raiseSeriesData(t){switch(this.chartName){case"xy":C.JH.addSeriesData(t.pos,t.sensor_val),C.JH.auto_fit&&C.JH.fitWithEORange(0,this.sensor_max);break;case"txy":p.K.addSeriesData(t.times,t.pos,t.sensor_val),p.K.auto_fit&&p.K.fitWithEORange(0,this.sensor_max);break;case"ts":C.eD.addSeriesData(t.times,t.speeds),C.eD.auto_fit&&C.eD.fit();break;default:break}}clearSeriesData(){switch(this.chartName){case"xy":C.JH.clearSeriesData();break;case"txy":p.K.clearSeriesData();break;case"ts":C.eD.clearSeriesData();break;default:break}}chartChanged(t){this.chartName=b[t],this.clearSeriesData(),this.process_cache.len>1&&this.raiseSeriesData(this.process_cache.pdata)}}const x=new w;function $(){p.K.createChart("txy")}var S={data(){return{popvisible:!1,is_activated:!1,showCursor:!1,isAutoFit:!0,select_item_indx:-1}},props:{msg:String},activated(){},deactivated(){},mounted(){$()},unmounted(){p.K.destory()},computed:{rangeColor(){return this.isAutoFit?"lime":"#f4f7f4"},activeChartType(){return this.$global_var.ui_config.chart_tab},max_torque(){return this.$store.state.g_status.sensor_max*this.$store.state.sensors["torque"].gain+this.$store.state.sensors["torque"].offset}},methods:{clearSeriesData(){p.K.is_init&&p.K.clearSeriesData()},show_cursor_method(){this.select_item_indx=1,this.showCursor=!this.showCursor,p.K.showCursor(this.showCursor)},fit(){p.K.fitWithEORange(0,this.max_torque)},auto_range(){this.select_item_indx=2,this.isAutoFit=!this.isAutoFit,p.K.auto_fit=this.isAutoFit},change_page(t){this.$emit("onShowChartChange",t),x.chartChanged(t)},switchChart(t){this.select_item_indx=-1,this.popvisible1=!1,this.$global_var.ui_config.chart_tab=t,this.change_page(this.$global_var.ui_config.chart_tab)}}},y=s(83744);const k=(0,y.Z)(S,[["render",m],["__scopeId","data-v-141d5a22"]]);var D=k;const z=t=>((0,a.dD)("data-v-660a03b2"),t=t(),(0,a.Cn)(),t),A={class:"chart-main"},F=z((()=>(0,a._)("div",{id:"scichartxy",class:"chart-box"},null,-1))),q={class:"chart-options",contenteditable:!1},E={class:"g-label"},R={class:"g-select-label"},N=z((()=>(0,a._)("div",{class:"x-label"},"angle",-1)));function j(t,e,s,o,n,c){const l=(0,a.up)("svg-loader");return(0,a.wg)(),(0,a.iD)("div",A,[F,(0,a._)("div",{class:"operate-chart-box",contenteditable:"true",onBlur:e[7]||(e[7]=t=>n.select_item_indx=-1)},[(0,a._)("div",{class:(0,r.C_)({"select-chart":!0,"bgc-white":0==n.select_item_indx}),onClick:e[0]||(e[0]=t=>n.select_item_indx=0==n.select_item_indx?-1:0)},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:"Chart"})],2),(0,a._)("div",{class:"select-chart",onClick:e[1]||(e[1]=(...t)=>c.auto_range&&c.auto_range(...t))},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:n.isAutoFit?"ActiveAuto":"StaticAuto"},null,8,["icon"])]),n.isAutoFit?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)({"select-chart":!0,"bgc-white":3==n.select_item_indx}),onClick:e[2]||(e[2]=(...t)=>c.fit&&c.fit(...t))},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:"AutoChart"})],2)),(0,a.wy)((0,a._)("div",q,[(0,a._)("div",{class:(0,r.C_)({"active-chart":1==t.$global_var.ui_config.chart_tab}),onClick:e[3]||(e[3]=t=>c.switchChart(1))},(0,r.zw)(t.$t("curve.torqueAngleCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":2==t.$global_var.ui_config.chart_tab}),onClick:e[4]||(e[4]=t=>c.switchChart(2))},(0,r.zw)(t.$t("curve.timeAngleTorqueCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":3==t.$global_var.ui_config.chart_tab}),onClick:e[5]||(e[5]=t=>c.switchChart(3))},(0,r.zw)(t.$t("curve.speedCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":4==t.$global_var.ui_config.chart_tab}),onClick:e[6]||(e[6]=t=>c.switchChart(4))},(0,r.zw)(t.$t("curve.jobChart")),3)],512),[[i.F8,0==n.select_item_indx]])],32),(0,a._)("div",E,[(0,a._)("div",R,[(0,a.Wm)(l,{w:"4.5rem",h:"2.5rem",icon:"Steps"})])]),N])}function W(){C.JH.hasEO=!0,C.JH.createChart("scichartxy")}var I={data(){return{popvisible1:!1,is_activated:!1,is_init:!1,showCursor:!1,select_item_indx:-1,isAutoFit:!0}},props:{msg:String},activated(){},deactivated(){},mounted(){W()},unmounted(){C.JH.destory()},computed:{max_torque(){return this.$store.state.g_status.sensor_max*this.$store.state.sensors["torque"].gain+this.$store.state.sensors["torque"].offset}},methods:{clearSeriesData(){C.JH.is_init&&C.JH.clearSeriesData()},show_cursor_method(){this.select_item_indx=-1,this.showCursor=!this.showCursor,C.JH.showCursor(this.showCursor)},fit(){C.JH.fitWithEORange(0,this.max_torque)},change_page(t){this.$emit("onShowChartChange",t),x.chartChanged(t)},auto_range(){this.isAutoFit=!this.isAutoFit,C.JH.auto_fit=this.isAutoFit},switchChart(t){this.select_item_indx=-1,this.popvisible1=!1,this.$global_var.ui_config.chart_tab=t,this.change_page(this.$global_var.ui_config.chart_tab)}}};const J=(0,y.Z)(I,[["render",j],["__scopeId","data-v-660a03b2"]]);var O=J;const B=t=>((0,a.dD)("data-v-19694de4"),t=t(),(0,a.Cn)(),t),H={class:"chart-main"},L=B((()=>(0,a._)("div",{id:"scichart_ts",class:"chart-box"},null,-1))),P={class:"chart-options",contenteditable:!1},M=B((()=>(0,a._)("div",{class:"x-label"},"time",-1)));function V(t,e,s,o,n,c){const l=(0,a.up)("svg-loader");return(0,a.wg)(),(0,a.iD)("div",H,[L,(0,a._)("div",{class:"operate-chart-box",contenteditable:"true",onBlur:e[7]||(e[7]=t=>n.select_item_indx=-1)},[(0,a._)("div",{class:(0,r.C_)({"select-chart":!0,"bgc-white":0==n.select_item_indx}),onClick:e[0]||(e[0]=t=>n.select_item_indx=0==n.select_item_indx?-1:0)},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:"Chart"})],2),(0,a._)("div",{class:"select-chart",onClick:e[1]||(e[1]=(...t)=>c.auto_range&&c.auto_range(...t))},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:n.isAutoFit?"ActiveAuto":"StaticAuto"},null,8,["icon"])]),n.isAutoFit?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)({"select-chart":!0,"bgc-white":3==n.select_item_indx}),onClick:e[2]||(e[2]=(...t)=>c.fit&&c.fit(...t))},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:"AutoChart"})],2)),(0,a.wy)((0,a._)("div",P,[(0,a._)("div",{class:(0,r.C_)({"active-chart":1==t.$global_var.ui_config.chart_tab}),onClick:e[3]||(e[3]=t=>c.switchChart(1))},(0,r.zw)(t.$t("curve.torqueAngleCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":2==t.$global_var.ui_config.chart_tab}),onClick:e[4]||(e[4]=t=>c.switchChart(2))},(0,r.zw)(t.$t("curve.timeAngleTorqueCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":3==t.$global_var.ui_config.chart_tab}),onClick:e[5]||(e[5]=t=>c.switchChart(3))},(0,r.zw)(t.$t("curve.speedCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":4==t.$global_var.ui_config.chart_tab}),onClick:e[6]||(e[6]=t=>c.switchChart(4))},(0,r.zw)(t.$t("curve.jobChart")),3)],512),[[i.F8,0==n.select_item_indx]])],32),M])}function G(){C.eD.createChart("scichart_ts")}var K={data(){return{popvisible:!1,is_activated:!1,showCursor:!1,select_item_indx:-1,isAutoFit:!0}},props:{msg:String},activated(){},deactivated(){},mounted(){G()},unmounted(){C.eD.destory()},methods:{clearSeriesData(){C.eD.is_init&&C.eD.clearSeriesData()},show_cursor_method(){this.select_item_indx=2,this.showCursor=!this.showCursor,C.eD.showCursor(this.showCursor)},auto_range(){this.isAutoFit=!this.isAutoFit,C.eD.auto_fit=this.isAutoFit},fit(){C.eD.fit()},change_page(t){this.$emit("onShowChartChange",t),x.chartChanged(t)},clickOperateBox(t){this.select_item_indx=t==this.select_item_indx?-1:t,1==t?this.show_cursor_method():2==t&&(this.isAutoFit=!this.isAutoFit,this.fit())},switchChart(t){this.popvisible1=!1,this.$global_var.ui_config.chart_tab=t,this.change_page(this.$global_var.ui_config.chart_tab),this.clickOperateBox(-1)}}};const T=(0,y.Z)(K,[["render",V],["__scopeId","data-v-19694de4"]]);var U=T;const Z=t=>((0,a.dD)("data-v-9342fdd8"),t=t(),(0,a.Cn)(),t),Y={class:"job-options-box"},Q={class:"chart-box1",contenteditable:!1},X={key:0,class:"job-options-box_line1"},tt=Z((()=>(0,a._)("div",{class:"job-options-box_f"},"&",-1))),et=Z((()=>(0,a._)("div",{class:"job-options-box_line2"},null,-1)));function st(t,e,s,o,n,c){const l=(0,a.up)("svg-loader"),h=(0,a.up)("doughnutPie");return(0,a.wg)(),(0,a.iD)("div",Y,[(0,a._)("div",{class:"operate-chart-box1",contenteditable:"true",onBlur:e[5]||(e[5]=t=>n.select_item_indx=-1)},[(0,a._)("div",{class:(0,r.C_)({"select-chart":!0,"bgc-white":0==n.select_item_indx}),onClick:e[0]||(e[0]=t=>n.select_item_indx=0==n.select_item_indx?-1:0)},[(0,a.Wm)(l,{class:"chart-icon",size:"2.5rem",icon:"Chart"})],2),(0,a.wy)((0,a._)("div",Q,[(0,a._)("div",{class:(0,r.C_)({"active-chart":1==t.$global_var.ui_config.chart_tab}),onClick:e[1]||(e[1]=t=>c.switchChart(1))},(0,r.zw)(t.$t("curve.torqueAngleCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":2==t.$global_var.ui_config.chart_tab}),onClick:e[2]||(e[2]=t=>c.switchChart(2))},(0,r.zw)(t.$t("curve.timeAngleTorqueCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":3==t.$global_var.ui_config.chart_tab}),onClick:e[3]||(e[3]=t=>c.switchChart(3))},(0,r.zw)(t.$t("curve.speedCurve")),3),(0,a._)("div",{class:(0,r.C_)({"active-chart":4==t.$global_var.ui_config.chart_tab}),onClick:e[4]||(e[4]=t=>c.switchChart(4))},(0,r.zw)(t.$t("curve.jobChart")),3)],512),[[i.F8,0==n.select_item_indx]])],32),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.jobChartItems2,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"job-options-box_1"},[e?((0,a.wg)(),(0,a.iD)("div",X)):(0,a.kq)("",!0),tt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"job-options-box_2"},[(0,a._)("div",{class:(0,r.C_)(["job-options-box_3",1==t.Active?"active-box":""])},[et,(0,a.Wm)(h,{class:"doughtPie-box",prefix:t.Prefix,pset:t.Pset,total:t.Total,active:t.Active,status:t.Status},null,8,["prefix","pset","total","active","status"])],2)])))),128))])))),128))])}var at=s(10413),it={components:{doughnutPie:at.Z},props:{},data(){return{jobChartItems:[[{Pset:"001",Total:7,Status:[],Prefix:"A",Active:1}]],jobChartItems2:[],select_item_indx:-1}},computed:{jobString(){return JSON.stringify(this.jobChartData())}},watch:{jobString:{handler(t){this.jobChartItems2=JSON.parse(t)},immediate:!0}},created(){},mounted(){this.jobChartItems2=this.jobChartData()},methods:{change_page(t){this.$emit("onShowChartChange",t),x.chartChanged(t)},switchChart(t){this.select_item_indx=-1,this.popvisible1=!1,this.$global_var.ui_config.chart_tab=t,this.change_page(this.$global_var.ui_config.chart_tab)},jobChartData(){return"undefined"===typeof this.$store.state.g_status.jobChartItems||0===this.$store.state.g_status.jobChartItems.length?this.jobChartItems:this.$store.state.g_status.jobChartItems}}};const rt=(0,y.Z)(it,[["render",st],["__scopeId","data-v-9342fdd8"]]);var ot=rt,nt=s(74125);const ct={key:0,class:"right-msg"},lt={key:1,class:"err-line"},ht={class:"err-state"},ut={key:2,class:"err-msg"},dt={class:"err-code-text"},_t={class:"err-desc-text"};function gt(t,e,s,i,o,n){const c=(0,a.up)("svg-loader");return(0,a.wg)(),(0,a.iD)("div",{class:(0,r.C_)({"right-box":!0,nok:0==n.isok})},[n.isok?((0,a.wg)(),(0,a.iD)("div",ct,(0,r.zw)(n.isOkText),1)):(0,a.kq)("",!0),0==n.isok?((0,a.wg)(),(0,a.iD)("div",lt,[(0,a.Wm)(c,{class:"alarm-icon",icon:"StaticWhiteAlarm",size:"3rem"}),(0,a._)("div",ht,(0,r.zw)(t.$t("monitor.qualified_nok")),1)])):(0,a.kq)("",!0),0==n.isok?((0,a.wg)(),(0,a.iD)("div",ut,[(0,a._)("span",dt,(0,r.zw)(t.$t("monitor.unqualifiedcode"))+"："+(0,r.zw)(o.errcode),1),(0,a._)("span",_t,(0,r.zw)(t.$t("monitor.reason"))+"："+(0,r.zw)(o.msg),1)])):(0,a.kq)("",!0)],2)}var mt=s(69120),pt={components:{},data(){return{isShow:!0,msg:"--",errcode:""}},props:{desc:{type:String,default:"--"}},methods:{cancel(){this.isShow=!1},getErrorMessage(){if(this.$store.state.g_status.fail_code){if(this.errcode=this.$store.state.g_status.fail_code.toString(16).toUpperCase().padStart(4,"0"),"0000"==this.code)return;(0,mt.$0)(this.errcode).then((t=>{0==t.status&&t.data&&(this.msg=t.data)}))}}},computed:{isOkText(){return this.isok?this.$t("monitor.qualified_ok"):this.$t("monitor.qualified_nok")},isok(){return 0==this.$store.state.g_status.fail_code&&this.$store.state.g_status.isok}},created(){this.getErrorMessage()},watch:{isok:{handler(t){0==t&&this.getErrorMessage()},immediate:!0},"$store.state.g_status.fail_code":{handler(){this.getErrorMessage()},immediate:!0}}};const vt=(0,y.Z)(pt,[["render",gt],["__scopeId","data-v-7c8fb400"]]);var ft=vt;const Ct=t=>((0,a.dD)("data-v-f10507bc"),t=t(),(0,a.Cn)(),t),bt={key:0,class:"running-box"},wt={class:"running-msg"},xt=Ct((()=>(0,a._)("div",{class:"running-bgc"},null,-1)));function $t(t,e,s,i,o,n){return o.isShow?((0,a.wg)(),(0,a.iD)("div",bt,[(0,a._)("div",wt,(0,r.zw)(t.$t("monitor.running")),1),xt])):(0,a.kq)("",!0)}var St={data(){return{isShow:!0}},methods:{cancel(){this.isShow=!1}}};const yt=(0,y.Z)(St,[["render",$t],["__scopeId","data-v-f10507bc"]]);var kt=yt;const Dt=t=>((0,a.dD)("data-v-46d475fe"),t=t(),(0,a.Cn)(),t),zt={class:"pf-param-line"},At={class:"block1"},Ft={class:"block2"},qt={class:"block3"},Et={class:"top-box"},Rt={class:"limit-val"},Nt={class:"btm-box"},jt={class:"limit-val"},Wt=Dt((()=>(0,a._)("span",null,null,-1))),It=Dt((()=>(0,a._)("span",{class:"line"},null,-1)));function Jt(t,e,s,i,o,n){const c=(0,a.up)("svg-loader");return(0,a.wg)(),(0,a.iD)("div",zt,[(0,a._)("div",At,(0,r.zw)(s.sensorName)+":",1),(0,a._)("div",Ft,(0,r.zw)(n.display_value)+(0,r.zw)(s.sensorUnit),1),(0,a._)("div",qt,[(0,a._)("div",Et,[(0,a.Wm)(c,{class:"arrow-icon",icon:"StaticMax",size:"1.2rem"}),(0,a._)("span",Rt,(0,r.zw)(n.maxDisplayVal),1)]),(0,a._)("div",Nt,[(0,a.Wm)(c,{class:"arrow-icon",icon:"StaticMin",size:"1.2rem"}),(0,a._)("span",jt,(0,r.zw)(n.minDisplayVal),1)]),Wt]),It])}const Ot={name:"NewSensor",data(){return{count:1,notNum:"--"}},props:{sensorName:{type:String,default:"Sensor"},sname:{type:String,default:"force"},sensorValue:{type:null,default:10},max:{type:null,default:"--"},min:{type:null,default:"--"},sensorUnit:{type:String,default:"KN"},fixed:{type:Number,default:2},height:{type:String,default:"2rem"},nameFontsize:{type:String,default:"1.8vh"},valueFontsize:{type:String,default:"3vh"},unitFontsize:{type:String,default:"1.8vh"},width:{type:String,default:""},isShowLine:{type:Boolean,default:!0},displayLimit:{type:Boolean,default:!0}},methods:{},mounted(){},unmounted(){},computed:{limitColor(){return this.sensorValue>this.max?"#f80606":this.sensorValue<this.min?"#2edbe7":"#121312"},display_value(){var t=this.$store.state.sensors[this.sname];return null==t&&(t={gain:1,offset:0}),"--"==this.sensorValue?this.sensorValue:(parseFloat(this.sensorValue)*t.gain+t.offset).toFixed(this.fixed)},isDisplayLine(){return this.isShowLine?"block":"none"},isDisplayLimit(){return this.displayLimit?"visible":"collapse"},maxDisplayVal(){var t=this.$store.state.sensors[this.sname];null==t&&(t={gain:1,offset:0});let e=(parseFloat(this.max)*t.gain+t.offset).toFixed(1);return isNaN(e)?this.notNum:e},minDisplayVal(){var t=this.$store.state.sensors[this.sname];null==t&&(t={gain:1,offset:0});let e=(parseFloat(this.min)*t.gain+t.offset).toFixed(1);return isNaN(e)?this.notNum:e}}},Bt=()=>{(0,i.sj)((t=>({"87d9edf2":t.isDisplayLine,"7363d5f0":t.isDisplayLimit})))},Ht=Ot.setup;Ot.setup=Ht?(t,e)=>(Bt(),Ht(t,e)):Bt;var Lt=Ot;const Pt=(0,y.Z)(Lt,[["render",Jt],["__scopeId","data-v-46d475fe"]]);var Mt=Pt;const Vt={key:0,class:"err-box"},Gt={class:"alarm-text"},Kt={class:"specific-alarm-msg"},Tt={class:"alarm-err-text"},Ut={class:"alarm-code"},Zt={class:"err-reason-text"},Yt={class:"err-reason"},Qt={class:"more-err-reason"};function Xt(t,e,s,i,o,n){const c=(0,a.up)("svg-loader");return o.isShow?((0,a.wg)(),(0,a.iD)("div",Vt,[(0,a._)("div",{class:"white-box",onClick:e[0]||(e[0]=(...t)=>n.clearDeviceErr&&n.clearDeviceErr(...t))},[(0,a.Wm)(c,{class:"alarm-icon",icon:"ActiveRedAlarm",size:"4.5rem",color:"red"}),(0,a._)("div",Gt,(0,r.zw)(t.$t("alarm.errRest")),1)]),(0,a._)("div",Kt,[(0,a._)("span",Tt,(0,r.zw)(t.$t("alarm.errCode")),1),(0,a._)("span",Ut,(0,r.zw)(n.errCode),1),(0,a._)("span",Zt,(0,r.zw)(t.$t("alarm.errReason")),1),(0,a._)("span",Yt,(0,r.zw)(n.headText),1),(0,a._)("div",Qt,(0,r.zw)(n.endText),1)])])):(0,a.kq)("",!0)}var te=s(26971),ee=s(84965),se={data(){return{isShow:!0,desc:"未知原因",isHasGetMsg:!1,module:"ALARM"}},props:{state:{type:String,default:"nok"},code:{type:String,default:"4334"}},methods:{cancel(){this.isShow=!1},initData(){},clearDeviceErr(){this.module in this.$store.state.f_status.permissions&&4==this.$store.state.f_status.permissions[this.module]?(0,te.QS)().then((t=>{if(0==t.status){let t=this.$t("alarm.clsSuc");ee.c.success([t])}else ee.c.error(["清错失败"])})):ee.c.warning(["清除告警失败，权限被拒绝!!!"])},getErrorMsg(){(0,mt.Bl)(this.errCode).then((t=>{t.data&&t.data.alarm_desc&&(this.desc=t.data.alarm_desc),this.isHasGetMsg=!0})).catch((()=>{this.isHasGetMsg=!0}))}},computed:{headText(){let t=this.desc;return t.substring(0,11)},endText(){let t=this.desc;return t.substring(11,this.desc.length)},errCode(){let t=this.$store.state.g_status.alarm_code,e=`${parseInt(t).toString(16)}`;while(e.length<4)e=`0${e}`;return e},alarmHisLevel(){return 4}},watch:{errCode(){this.isHasGetMsg||this.getErrorMsg()}},created(){this.getErrorMsg()}};const ae=(0,y.Z)(se,[["render",Xt],["__scopeId","data-v-39772e47"]]);var ie=ae;const re={class:"pf-param-line"},oe={class:"block1"},ne={class:"id-left-msg"},ce={class:"block2"},le={class:"block3"},he={class:"id-right-msg"};function ue(t,e,s,i,o,n){return(0,a.wg)(),(0,a.iD)("div",re,[(0,a._)("div",oe,[(0,a._)("span",ne," ID:"+(0,r.zw)(s.tid),1)]),(0,a._)("div",ce,[(0,a._)("span",{class:(0,r.C_)(["time-msg",{scroll:o.isOverflow}]),ref:"content"},(0,r.zw)(s.sn),3)]),(0,a._)("div",le,[(0,a._)("span",he,(0,r.zw)(s.batchesinfo),1)]),(0,a._)("span",{class:(0,r.C_)(n.lineClass)},null,2)])}var de={name:"NewSensor",data(){return{count:1,isOverflow:!1}},props:{tid:{type:Number,default:3213},sn:{type:String,default:"1234567890"},batchesinfo:{type:String,default:"3/8"},isShowLine:{type:Boolean,default:!0}},mounted(){this.snChange()},watch:{sn(){this.snChange()}},methods:{snChange(){const t=this.$refs.content.parentNode.offsetWidth,e=this.$refs.content.offsetWidth;this.isOverflow=e>t}},computed:{limitColor(){return this.sensorValue>this.max?"#f80606":this.sensorValue<this.min?"#2edbe7":"#121312"},display_value(){var t=this.$store.state.sensors[this.sname];return null==t&&(t={gain:1,offset:0}),(parseFloat(this.sensorValue)*t.gain+t.offset).toFixed(this.fixed)},lineClass(){return this.isShowLine?"line":""}}};const _e=(0,y.Z)(de,[["render",ue],["__scopeId","data-v-50bf6799"]]);var ge=_e;const me=t=>((0,a.dD)("data-v-87560aca"),t=t(),(0,a.Cn)(),t),pe={key:0,class:"offline-box"},ve={class:"offline-msg"},fe=me((()=>(0,a._)("div",{class:"offline-bgc"},null,-1)));function Ce(t,e,s,i,o,n){return o.isShow?((0,a.wg)(),(0,a.iD)("div",pe,[(0,a._)("div",ve,(0,r.zw)(t.$t("monitor.readyCode")),1),fe])):(0,a.kq)("",!0)}var be={data(){return{isShow:!0}},methods:{cancel(){this.isShow=!1}}};const we=(0,y.Z)(be,[["render",Ce],["__scopeId","data-v-87560aca"]]);var xe=we;const $e={components:{chartRealPosSensor:D,chartPosSensor:O,chartRealSpeed:U,chartDot:ot,Right:ft,Runing:kt,NewSensor:Mt,IDLine:ge,Ready:xe,DevcieAlarm:ie},data(){return{pdata_cnt:0,select_chart_index:1,eoRange:{pos:{Min:0,Max:5},sensor:{Min:2,Max:12}},eoRangeInit:!1,componentName:"ChildComponent",componentKey:1,componentJobName:"ChildJobComponent",componentJobKey:1}},methods:{onShowChartChange(t){this.select_chart_index=t,(0,l.xK)(this.$global_var,{chart_tab:t})},updateUnit(t){return this.$store.state.sensors[t].name},getResult(){this.res.torque=this.$store.state.g_status.ret_sensor.toFixed(3),this.res.angle=this.$store.state.g_status.ret_pos.toFixed(3)},sensorUnit(t){return this.$store.state.sensors[t].name},changeVal(t){var e=this.$store.state.g_status[t];this.$store.state.g_status[t]=1==e?0:1},setEoRange(t){(0,nt.R4)(this.$store.state.g_status.pset).then((e=>{e.data&&e.data.pos&&e.data.sensor&&(e.data.pos.Min+=t,e.data.pos.Max+=t,this.eoRange=e.data,C.JH.setEoRange(e.data.pos.Min*this.$store.state.sensors["angle"].gain+this.$store.state.sensors["angle"].offset,e.data.pos.Max*this.$store.state.sensors["angle"].gain+this.$store.state.sensors["angle"].offset,e.data.sensor.Min*this.$store.state.sensors["torque"].gain+this.$store.state.sensors["torque"].offset,e.data.sensor.Max*this.$store.state.sensors["torque"].gain+this.$store.state.sensors["torque"].offset),C.JH.is_init&&C.JH.auto_fit&&C.JH.fitWithEO())}))}},computed:{showFooter(){return!0},anglelangProp(){return this.$i18n.t("param.angle")},torquelangProp(){return this.$i18n.t("param.torque")},speedlangProp(){return this.$i18n.t("param.speed")},stateBgc(){var t=4;return t=this.$store.state.g_status.alarmed?5:this.$store.state.g_status.rok&&!this.$store.state.g_status.busy?2:this.$store.state.g_status.busy?3:4,t},runOk(){return!this.$store.state.g_status["busy"]&&this.$store.state.g_status["rok"]},tab1_opacity(){return 1==this.select_chart_index?"visible":"hidden"},tab2_opacity(){return 2==this.select_chart_index?"visible":"hidden"},tab3_opacity(){return 3==this.select_chart_index?"visible":"hidden"},tab4_opacity(){return 4==this.select_chart_index?"visible":"hidden"}},mounted(){this.select_chart_index=this.$global_var.ui_config.chart_tab,x.chartChanged(this.$global_var.ui_config.chart_tab)},created(){this.$watch((()=>this.$store.state.g_status.rok),(t=>{t?C.JH.setRectEO(this.$store.state.g_status.G_Inflexion_Angle*this.$store.state.sensors["angle"].gain+this.$store.state.sensors["angle"].offset,this.$store.state.g_status.G_Inflexion_Force*this.$store.state.sensors["torque"].gain+this.$store.state.sensors["torque"].offset):C.JH.setRectEO(0,0),this.$store.state.g_status.results.length>1&&(t=!1),this.setEoRange(this.$store.state.g_status.eopos),C.JH.setEoResult(t,this.$store.state.g_status.isok)})),this.$watch((()=>this.$store.state.g_status.segment.length),(t=>{0===t?C.JH.clearStepsRectEO():C.JH.addStepsRectEO(this.$store.state.g_status.segment.slice(0,t-1).map((t=>({angle:t.angle*this.$store.state.sensors["angle"].gain+this.$store.state.sensors["angle"].offset,torque:t.torque*this.$store.state.sensors["torque"].gain+this.$store.state.sensors["torque"].offset}))))})),setTimeout((()=>{x.createWs()}),1e3)},watch:{"$store.state.g_status.ret_sn":{handler(){this.componentName="ChildComponent",this.componentKey++},immediate:!0},"$store.state.g_status.job":{handler(){this.componentJobName="ChildJobComponent",this.componentJobKey++},immediate:!0}}},Se=()=>{(0,i.sj)((t=>({"4de88163":t.tab1_opacity,"3ba61f38":t.tab2_opacity,"76715f65":t.tab3_opacity,"0ab5ce66":t.tab4_opacity})))},ye=$e.setup;$e.setup=ye?(t,e)=>(Se(),ye(t,e)):Se;var ke=$e;const De=(0,y.Z)(ke,[["render",c],["__scopeId","data-v-05e686c4"]]);var ze=De}}]);
//# sourceMappingURL=210.aa6ebc2a.js.map