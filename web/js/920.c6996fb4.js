"use strict";(self["webpackChunkleetx_web"]=self["webpackChunkleetx_web"]||[]).push([[920],{62946:function(t,e,i){i.r(e),i.d(e,{default:function(){return y}});var o=i(66252),n=i(3577);const s=t=>((0,o.dD)("data-v-b754b43a"),t=t(),(0,o.Cn)(),t),a={class:"io-container"},l={class:"io-box"},d={class:"inner-box"},r=s((()=>(0,o._)("span",null,null,-1))),u={class:"left-box"},c=["onClick"],g={key:0,class:"circle"},h={class:"right-box"},b={key:0,class:"right-edit"},f=["onClick"],m=s((()=>(0,o._)("div",{class:"IO"},"IO",-1)));function p(t,e,i,s,p,v){const w=(0,o.up)("LeetxSwitch");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",l,[(0,o._)("div",d,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(8,(t=>(0,o._)("div",{class:"io-line",key:t},[(0,o._)("span",null,"I"+(0,n.zw)(t),1),r,(0,o._)("span",null,"O"+(0,n.zw)(t),1)]))),64))]),(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.inputStatus,((t,e,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"io-left-line",key:e},[(0,o._)("span",{class:(0,n.C_)(["left-input",{"green-border":t,"red-border":!t}]),onClick:t=>(p.showinpt=i+1)&&p.isdebugmode},(0,n.zw)(v.getIoName(0,i)),11,c),v.showCircle(i)?((0,o.wg)(),(0,o.iD)("span",g)):(0,o.kq)("",!0),(0,o._)("span",{class:(0,n.C_)({"left-line":!0,red:!t})},null,2)])))),128))]),(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.otputStatus,((t,e,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"io-right-line",key:e},[p.showotpt==i+1&&p.isdebugmode?((0,o.wg)(),(0,o.iD)("span",b,[(0,o.Wm)(w,{module:p.module,value:t,activeVal:1,staticVal:0,height:2,onSentVal:t=>v.debugIo(t,1,i)},null,8,["module","value","onSentVal"])])):(0,o.kq)("",!0),(0,o._)("span",{class:(0,n.C_)(["right-input",{"green-border":t,"red-border":!t}]),onClick:t=>p.showotpt=i+1},(0,n.zw)(v.getIoName(1,i)),11,f),(0,o._)("span",{class:(0,n.C_)({"right-line":!0,"green-bgc":t,red:!t})},null,2)])))),128))]),m])])}var v=i(47294),w=i(38373),C=i(19995),I=i(27253),_=i(8207),k=i(84965),S={components:{LeetxSwitch:I.Z},data(){return{is_unmounted:!1,showinpt:null,showotpt:null,inputStatus:{0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1},otputStatus:{0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1},dataId:void 0,con:void 0,ioTimer:void 0,canGetConfig:!1,ioConfig:[[],[]],module:"DEBUG",isdebugmode:!1}},methods:{edit(){(0,v.Z)().then((()=>{})).catch((()=>{}))},debugIo(t,e,i){if(!this.ioConfig[e][i]){let t=this.$t("dbgio.nouse");return void k.c.warning([t])}let o=this.ioConfig[e][i];o.val=t,(0,C.mY)(o).then((t=>{if(0==t.status){let t=this.$t("dbgio.sucess");k.c.success([t])}else{let t=this.$t("dbgio.err");k.c.warning([t])}})).catch((()=>{let t=this.$t("dbgio.err");k.c.warning([t])}))},getIoData(){this.ioTimer=setInterval((()=>{this.dataId=Math.random(),w.U3.send(JSON.stringify({id:this.dataId,mode:"IO"}))}),200)},createWs(){w.U3.msghandler=t=>{var e=JSON.parse(t);e.id==this.dataId&&"IO"==e.mode&&(this.inputStatus=e.data.in,this.otputStatus=e.data.out,this.canGetConfig=!0)}},getIoConfig(){(0,C.yq)().then((t=>{let e,i;if(t.data.ToolIn){e=t.data.ToolIn.Member;for(let t=0;t<e.length;t++){if(!(0,_.ap)(e[t].LinkSdo))continue;let i=10*e[t].StartByte;this.ioConfig[0][i]={addr:`I${i+1}`,sdo:e[t].LinkSdo,val:void 0,Not:e[t].Not}}}if(t.data.ToolOut){i=t.data.ToolOut.Member;for(let t=0;t<i.length;t++){if(!(0,_.j8)(i[t].LinkSdo))continue;let e=10*i[t].StartByte;this.ioConfig[1][e]={addr:`O${e+1}`,sdo:i[t].LinkSdo,val:void 0}}}this.createWs()}))},getIoName(t,e){let i=this.ioConfig[t][e];return i?0==t?(0,_.ap)(i.sdo).name:(0,_.j8)(i.sdo).name:""},debugIn(){this.isdebugmode=!this.isdebugmode,this.isdebugmode?(0,C.E7)():(0,C.aE)()},debugOut(){(0,C.aE)()},showCircle(t){return!!(this.ioConfig[0].length>0&&this.ioConfig[0][t])&&1==this.ioConfig[0][t]["Not"]}},created(){this.getIoData(),this.getIoConfig()},unmounted(){clearInterval(this.ioTimer)},mounted(){}},D=i(83744);const O=(0,D.Z)(S,[["render",p],["__scopeId","data-v-b754b43a"]]);var y=O}}]);
//# sourceMappingURL=920.c6996fb4.js.map